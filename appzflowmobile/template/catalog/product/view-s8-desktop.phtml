<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/**
 * Product view template
 *
 * @see Mage_Catalog_Block_Product_View
 * @see Mage_Review_Block_Product_View
 */
?>
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>

<script type="text/javascript">
    var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script>

<div id="single-product" class="s8-product">
	<div class="print-email">
		<a href="#print" class="print-page"><img src="<? echo $this->getSkinUrl('img/print.png');  ?>" /></a>
						<?php if ($this->canEmailToFriend()): ?>
										<a class="btn btn-black" href="<?php echo $this->helper('catalog/product')->getEmailToFriendUrl($_product) ?>"><img src="<? echo $this->getSkinUrl('img/email-f.png'); ?>" /></a>
									<?php endif; ?>
	</div>
	<?php echo $this->getLayout()->getBlock('breadcrumbs')->toHtml(); ?>
    <div id="single-product-details">
    <form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>>
        <div class="no-display">
            <input type="hidden" name="product" value="<?php echo $_product->getId() ?>" />
            <input type="hidden" name="related_product" id="related-products-field" value="" />
        </div>
		<h1><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></h1>
		<div id="s8-showcase" class="showcase">
		<span class="click-f-z"><a href="#">Click here to view large image</a></span>
			<?php echo $this->getChildHtml('media') ?>
		</div>
        <div class="product-details-inner">

			<div id="s8-config">
				<h2 class="select-simple-prod">Selected Brush</h2>
						<ul class="select-acc">
							<li>An Accessory</li>
							<li>An Accessory</li>
							<li>An Accessory</li>
						</ul>
						
						<?php //echo $this->getReviewsSummaryHtml($_product, false, true)?>
			
						<div class="product-details-price">
			
						<?php echo $this->getChildHtml('product_type_data') ?>
							<? $_attribute_ass = Mage::getModel('catalog/product')->load($_product->getId())->getAttributeText('best_assured');
								if($_attribute_ass == 'Yes'): ?>
								<div class="best-assured">
								<a href="<?php echo $this->getUrl('buyers-assurance')?>"><img src="<? echo $this->getSkinUrl('img/best-assured.png');  ?>" /></a>
							</div>
								<? endif;?>
			
							
							</div></div>
		
			<!-- <div class="product-details-inner-text"> -->
				<!-- <p><?php //echo $_helper->productAttribute($_product, nl2br($_product->getShortDescription()), 'short_description') ?></p> -->


<!-- ================ Package Choices ================= -->
				<div class="package-choices">
					<div class="row"><h2>Choose Your Brush</h2></div>
					<div class="three column grid">
						


				<?php $_productId = $_helper->productAttribute($_product, $_product->getId(), 'id'); ?>

				<?php 
						$_configProd = Mage::getModel('catalog/product')->load($_productId);
						$conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_configProd);



						$simple_collection = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();

						// var_dump($simple_collection);
						$count=0;
						foreach($simple_collection as $simple_product){?>
						<?php if($count % 2 == 0) {?>
        						<div class="column">
    					<?php	} ?>
							<div class="package-choice">
								<img src="<?php echo $simple_product->getImageUrl(); ?>" alt="">
								<h3><?php echo $simple_product->getName(); ?></h3>
								<span class="price"><?php echo Mage::helper('core')->currency($simple_product->getPrice()); ?></span>
							</div>
							<?php if($count % 2 == 0) {?>
        						</div>
    						<?php } 
							}
							$count++;
				 ?>

					</div>
				</div>
				
	<!-- ================ Package Choices END ================= -->			


			
				

			<? $_best=$this->htmlEscape($_product->getData('best_for')); ?>
			<div class="product-details-inner-box">
				<? 
				
					$_best =  $_product->getResource()->getAttribute('best_for')->getFrontendLabel();
					
					$attributeValues = Mage::getModel('catalog/product')->load($_product->getId())->getAttributeText('best_for');
					if($attributeValues > 0) :
					if($attributeValues > 1) :
					foreach($attributeValues as $attributeValue): 
					$attrclass = strtolower(str_replace(" ","_",$attributeValue));
					?>
	
					<span class="tooltip <?php echo $attrclass; ?>">Tooltip image</span><div class="tooltip-content"><?php echo $_best . " " . $attributeValue; ?></div>
					<?
					endforeach;
					
					else:
					$attrclass = strtolower(str_replace(" ","_",$attributeValues)); ?>
					
					<span class="tooltip <?php echo $attrclass; ?>">Tooltip image</span><div class="tooltip-content"><?php echo $_best . " " . $attributeValues; ?></div>
					<? endif; endif;
				?>
			<!-- 	<div class="but-pr">
					<a class="scroll-des" href="#product-tabs"><img src="<? //echo $this->getSkinUrl('img/button-r.png');  ?>" /></a>
					<div class="tooltip-content">Product Details</div>
					<a class="scroll-rel" href="#"><img src="<? //echo $this->getSkinUrl('img/button-p.png'); ?>" /></a>
					<div class="tooltip-content">Related Items and Accessories</div> -->
									
					
				</div>
			</div>

<!-- ================ Associated Upsells ================= -->

			<div class="associated-upsells">
				<h2>Select Accesories</h2>
					<div class="six column grid">

<?php 
   
   // Get product object.
   $object = Mage::getModel('catalog/product')->getCollection()->setPageSize(12)->load();
   $count2=0;
   foreach ( $object as $_aproduct ) {
   	$_product = Mage::getModel('catalog/product')->load($_aproduct->getId());?>
   			<?php if($count2 % 2 == 0) {?>
        				<div class="column">
    			<?php	} ?>
   							<div class="associated-upsell">
   		
								<img src="<?php echo $_product ->getSmallImageUrl(); ?>" alt="">
								<h3><?php echo $_product ->getName(); ?></h3>
								<span class="price"><?php echo Mage::helper('core')->currency($_product->getPrice()); ?></span>
							</div>
				<?php if($count2 % 2 == 0) {?>
						</div>
						<?php } 
					}
						$count2++;
						?>
   <?php 
   //Get product detail using product id  (Suppose you have product id is : $product_id)
   // $_product2 = Mage::getModel('catalog/product')->load(757);
   // Zend_Debug::dump(Mage::getModel('catalog/product')->load(757)->getRelatedProducts());

   //check if record is empty or not
 

     //if result is not empty then get  upsell product detail using foreach loop
      // foreach($_product2->getUpSellProductCollection()->addStoreFilter() as $_upsell):
         
      //    //get detail of single upsell prdocut using upsell product id
      //    $upsp = Mage::getModel('catalog/product')->load($_upsell->getId());
     	// Zend_Debug::dump($upsp->debug());
      //    echo "Product Name : ". $upsp->getName();
      //    echo "Poduct url : ". $upsp->getProductUrl();
      //    echo "Product regular price : ". $upsp->getPrice();
         
      //  endforeach;


?>

					</div>
				</div>

<!-- ================ Associated Upsells END ================= -->

          <?php  /* ?><?php if ($this->canEmailToFriend()): ?>
                <p class="email-friend"><a href="<?php echo $this->helper('catalog/product')->getEmailToFriendUrl($_product) ?>"><?php echo $this->__('Email to a Friend') ?></a></p>
            <?php endif; ?> <?php */ ?>

            
            <?php echo $this->getChildHtml('alert_urls') ?>
            
            <?php echo $this->getTierPriceHtml() ?>
            <?php echo $this->getChildHtml('extrahint') ?>
            
            <div class="clearer"></div>
            <?php if ($_product->isSaleable() && $this->hasOptions()):?>
           		 <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
       	    <?php endif;?>
            
            <?php echo $this->getChildHtml('addtocart') ?>

            <?php if (!$this->hasOptions()):?>             
                <?php echo $this->getChildHtml('extra_buttons') ?>
            <?php elseif (!$_product->isSaleable()): ?>
                    <!-- nocache key="pdpAddToContent" -->
                    <?php echo $this->getChildHtml('addto') ?>
                    <!-- endnocache -->
            <?php endif; ?>
            
            <?php echo $this->getChildHtml('other');?>
			<!-- <div class="product-buy-k"> <span id="buySAFE_Kicker" name="buySAFE_Kicker" type="Kicker Custom Product"></span></div> -->
				</div>
			</form>
        </div>

       

      
       
    
    <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                // Remove custom datetime validators
                for (var methodName in Validation.methods) {
                    if (methodName.match(/^validate-datetime-.*/i)) {
                        delete Validation.methods[methodName];
                    }
                }

                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>
   

    <div id="single-product-description">
	<ul class="product-tabs">
		<li class="li-det"><span>Product details</span></li>
		<li class="li-rev"><span>Product reviews</span></li>
		<li><span>Product videos</span></li>
		<li><span>Specs</span></li>
	</ul>
		<div class="panes">
	<div class="product-description-tab">
		
		<?php foreach ($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html):?>
					<?php echo $html; ?>
				<?php endforeach;?>
		</div>
	<div>
	<!-- nocache key="pdpProductReviewsContent" -->	
	<?php echo $this->getChildHtml('product_additional_data_review') ?>
    <!-- endnocache -->
<?php echo $this->getChildHtml('review_form') ?>
	
	
	</div>
	<div>
	<? $videos=$_product->getvideos();
		$videos_parts = explode("\n", $videos); ?>
	<h3>Product Videos <?php if($videos_parts != 0) { ?><span>(<?php if($videos) { echo count($videos_parts); } else { echo "0"; }?>)</span><? } ?></h3>
	<div class="product-videos-holder">
	<?php if($videos) { ?>
	<?php foreach($videos_parts as $video_part) : ?>
	<div class="product-video"><? echo $video_part; ?></div>
	<?php endforeach; ?>
	<? } ?>
	
	
	

	</div>
	</div>
	<div class="product-specification-tab">
	<h3>Product Specification</h3>
	<? echo $desct=$_product->getData('specification'); ?>
	
	</div>
</div>

      <?php  /* ?> <?php echo $this->getChildHtml('upsell_products') ?><?php */ ?>
       	
    </div>
	
		<?php echo $this->getChildHtml('catalog.product.related') ?>
</div>

<!-- GoDataFeed code for product details pages -->
<script language="javascript" type="text/javascript" src="http://tracking.godatafeed.com/gdf_click.js"></script> 
<!-- End GoDataFeed code for product details pages -->

<?php echo $this->getLayout()->createBlock('remarketingtag/tag')->setTemplate('sperotek/remarketingtag/tag.phtml')->toHtml(); ?>